---
layout: post
title: "The Invisible 404"
description: "Amusing 404 pages are a waste of everyones time. Let's get real."
tags: [development, javascript]
imageURL: .gif
published: false
---

The best error page is no error page, so let's apply that to our 404 pages.

Intro: 404 wankery is great and all but when a user arrives at a page and we don't have a page ready, it doesn't actually *help* them to show a funny animated gif. Rather than spend so much time wondering how to make something amusing and viral, we should be making our 404 pages as invisible as possible.

Labelling them 404... why

Providing links to possible alteratives... a decent last resort

Ideal solution: Service that indexes and searches, and comes up with a "best guess" and redirects the user there (with a message?)

Actual solutions: Some techniques that could work for static sites, etc.

Using Google Search 

First set up a custom search engine: https://www.google.com/cse/manage/all
Select "Add", input a url in "Sites to search", optionally a name, hit Create.
Select "Edit" on the search engine created, then "Search engine ID" to see the ID. (008316387327485507723:jia2k-cmxom)
Then set up a new project on the Google developers console: https://console.developers.google.com/project
Under APIs, select the Custom Search API by clicking the "Off" option on the right.
Select "Credentials", then "Create New Key" and choose the "Browser Key" option.
Your API key will be needed soon: AIzaSyDXRjpBfunIKGm1uKvYgm6l30do4RhECpA

    $(document).ready(function() {
      var a = $('<a>', {href: window.location})[0];
      var phrase = a.pathname.split('/').join('+').split(' ').join('+').split('%20').join('+');
      tryGoogleSearch(phrase);
    });
    function tryGoogleSearch(phrase) {
      var engineID = '008316387327485507723:jia2k-cmxom';
      var apiKey = 'AIzaSyDXRjpBfunIKGm1uKvYgm6l30do4RhECpA';
      var url = "https://www.googleapis.com/customsearch/v1?key="+ apiKey + "&num=10&cx=" + engineID + "&q=" + escape(phrase) + "&callback=?";
      $.getJSON(url, '', function(response) {
        if (response.items !== undefined && response.items.length) {
          // Check if there's a response, and if so, redirect
          window.location.href = response.items[0].link;
          exit;
        } else {
          // Instead, show the 404 page with an option to search this site
          hideOverlay();
        }
      });
    }
    function showOverlay() {
      $('.searching').delay(500).fadeIn(200);
    }
    function hideOverlay() {
      $('.searching').delay(500).fadeOut(200);
    }
